# an example program, version: 1.0.0
# author: genshen <genshenchu@gmail.com>

version: 1

args:


packages:
  git:
    googletest:
      path: https://github.com/google/googletest.git
      tag: release-1.8.0
      build:
      - RUN {{.CACHE}} cmake {{.SRC_DIR}}/googletest -DCMAKE_INSTALL_PREFIX={{.PKG_DIR}}; make -j {{.CORES}}; make install
      cmake_lib: |
        include_directories({{.CMAKE_VENDOR_PATH_PKG}}/include)
        link_directories({{.CMAKE_VENDOR_PATH_PKG}}/lib)
    kiwi:
      path: https://git.gensh.me/genshen/kiwi.git
      tag: v0.2.0-alpha

  files:
    nlohmann:
      path: https://github.com/nlohmann/json/raw/v3.1.2/single_include/nlohmann
      files:
        json.hpp: json.hpp
      build:
      - CP json.hpp {{.INCLUDE}}/json.hpp
    agrs:
      path: https://raw.githubusercontent.com/Taywee/args/master   # version 6.2.0 has less features.
      files:
        args.hxx: args.hpp
      build:
      - CP args.hpp {{.INCLUDE}}/args.hpp

build:
  linux:
  - RUN {{.CACHE}} cmake {{.SRC_DIR}} -DCMAKE_INSTALL_PREFIX={{.PKG_DIR}}; make -j {{.CORES}}; make install
  darwin:
  - RUN {{.CACHE}} cmake {{.SRC_DIR}} -DCMAKE_INSTALL_PREFIX={{.PKG_DIR}}; make -j {{.CORES}}; make install

cmake_lib: |
  include_directories({{C.MAKE_VENDOR_PATH_PKG}}/include)
  link_directories({{.CMAKE_VENDOR_PATH_PKG}}/lib)